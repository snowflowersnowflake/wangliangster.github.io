# KKT 条件

不等式约束:
$$
min f(X), X\in \Reals^n \\
s.t \quad  h_i(X)=0, i=1,...p \\
g_j(X) \leq 0, j=1,...q \\

$$

构造$Lagrange$函数为:
$$
L(X,\lambda_i, \mu_j)=f(X)-\sum_{i=1}^p \lambda_i h_i(X)-\sum_{j=1}^q \mu_j g_j(X)
$$

若$X^*$是$f(X)$满足所有约束的局部极小值，则它必须满足$KKT$条件:
$$
\begin{cases}
\nabla f(X^*)=\sum_{i=1}^p\lambda_i \nabla h_i(X^*) + \sum_{j=1}^q \mu_j \nabla g_j(X^*)\\
\mu_j \geq 0 \\ 
\mu_j g_j(X^*)=0\\
\end{cases}
$$

讲起来，就是$f$的梯度是一系列等式约束$h_i$的梯度和不等式约束$g_j$的梯度的一系列线性组合。且不等式约束的梯度是非负的，并且如果$g_j(X^*)<0$，则$\mu_j$不会出现在线性组合中，也即$g_j(X^*)$与$\mu_j$不能同时非零。

如果$f$的梯度为零时取到极值，它相当于是无约束的极值点（约束不起任何作用）

如果$f$的梯度不为零处取到极值点:

- $\nabla f > 0$, 往梯度的**负**方向走，$f$还可以更小，但过这个方向一点就越界了，所以，所有约束（可行域）都应该处$f$的梯度方向这一侧，若$X^*$处于不等式边界，再往边界外走，应该使$f$增大（违反极小），所以该处不等式的梯度$\nabla g$应该与$f$的大致同向， 所以$\mu_j>0$。

- $\nabla f < 0$, 往梯度的方向走，$f$还可以更小，但过这个方向一点点就越界, 所有约束都应该处于梯度方向的反方向，而在该处边界不等式约束的梯度应该大于零，即继续沿着它往内走，函数值只能更大，所以$\mu_j>0$。

由此可见，在不等式边界，$\mu_j>0$ 必须满足，而在不等式内部，$f$可以向任何方向走，若在该处取得极值，$\nabla f$必须为零，从而不为零的不等式约束梯度$\mu_j$不可能出现在$\nabla f$的线性组合中。



## 参考
- [非线性优化KKT](https://www.zhihu.com/question/23311674/answer/235256926)
