## 最大后验概率估计
最大后验概率估计（Maximum a posteriori estimation, 简称MAP）也是一种常见的参数估计方法。
在深刻理解**极大似然**法的基础上，多想一步，将**估计参数**也服从某一分布联合起来考虑，就是最大后验概率估计。

举个**粟子:**

假设某铸币厂生产了一批硬币，已拿到你手上，现要根据它估计该厂生产硬币的水平（良品率）。

先从$N$个硬币中随机取一个，则它是良品的概率服从[0-1分布](math/statics/files/0-1.md)
$$
P_1(X=良品)=\theta，\quad P_1(X=残次)=1-\theta， 
$$

拿该硬币做$10000$次试验，正面出现次数$K$符合**参数为$p$**的[二项分布](math/statics/files/bin.md)。若是一个绝对合格的硬币，$10000$次试验，出现$5000=10000*p$的概率：
$$
P_2(K=10000p)=(\begin{array}{c} 10000p \\10000 \end{array})p^{10000p}(1-p)^{(10000(1-p))}=
\\ (\begin{array}{c} 5000 \\10000 \end{array})0.5^{10000}$$
最大，若试验次数继续增加它将更趋近于中位数。但硬币不可能是绝对合格的理想状态，它的合格程度服从$P_1(X=\theta)$分布，与工厂的良品率一致对应，假设经验（或猜）告诉我们工厂的良品率$\theta$为$90\%$，称为先验，如果先验**绝对正确**，则重复实验会以$0.5*0.90$服从二项分布。

即$P_2(K=4500)$会最大，

可实验结果出现了$4756$次正面向上，说明先验不太可靠，则要使
$$P_2(K=4756)P_1(\theta)= (\begin{array}{c} 4756 \\10000 \end{array}){(0.5\theta)}^{4756}(1-0.5\theta)^{5244}P_1(\theta)$$
(**最大后验估计**)最大，而不是
$$P_2(K=4756)= (\begin{array}{c} 4756 \\10000 \end{array}){p}^{4756}(1-p)^{5244}$$
(**极大似然**) 最大

### 计算结果
- 极大似然
	$\theta=0.4756*2=0.9512$
- 最大后验
	$\theta=\frac{4756+1}{4756+5244+1}=\frac{4757}{10001}*2=0.9513048695130487$

若没说清楚，可参考下面结合理解(to do refine)
- [详解最大似然估计（MLE）、最大后验概率估计（MAP），以及贝叶斯公式的理解](https://blog.csdn.net/u011508640/article/details/72815981)
